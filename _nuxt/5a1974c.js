(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{112:function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));r(38),r(27),r(37),r(59),r(28),r(60);var n=r(22),o=r(2),c=r(44),f=r(45),h=(r(56),r(13),r(58),r(25),r(55)),d=r.n(h);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function m(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var v=function(){function e(t){var r=this;Object(c.a)(this,e);var n={baseURL:t};this.instance=d.a.create(n),this.instance.interceptors.request.use((function(e){return r.BeforeRequestSend(e)}),void 0)}var t,r,n,h,l,v,y;return Object(f.a)(e,[{key:"BeforeRequestSend",value:(y=Object(o.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)}))),function(e){return y.apply(this,arguments)})},{key:"GET",value:(v=Object(o.a)(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.SEND(t,"get",{params:r||{},headers:n||{}}));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return v.apply(this,arguments)})},{key:"POST",value:(l=Object(o.a)(regeneratorRuntime.mark((function e(t,data,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.SEND(t,"post",{data:data||{},headers:r||{}}));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return l.apply(this,arguments)})},{key:"PUT",value:(h=Object(o.a)(regeneratorRuntime.mark((function e(t,data,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.SEND(t,"put",{data:data||{},headers:r||{}}));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return h.apply(this,arguments)})},{key:"PATCH",value:(n=Object(o.a)(regeneratorRuntime.mark((function e(t,data,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.SEND(t,"patch",{data:data||{},headers:r||{}}));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"DELETE",value:(r=Object(o.a)(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.SEND(t,"delete",{params:r||{},headers:n||{}}));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return r.apply(this,arguments)})},{key:"SEND",value:(t=Object(o.a)(regeneratorRuntime.mark((function e(t,r,n,c){var f=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.instance.request(m({url:t,method:r},n)).then((function(e){return e.data})).catch(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.response){e.next=11;break}if(console.error("".concat(o.response.status,": ").concat(o.response.statusText,"\nDetails: ").concat(JSON.stringify(o.response.data),"\nRequest: ").concat(JSON.stringify(m({},n)))),!(429==o.response.status&&(c||1)<3)){e.next=8;break}return e.next=5,new Promise((function(e,o){setTimeout((function(){e(f.SEND(t,r,n,c?c+1:1))}),2e3)}));case 5:return e.abrupt("return",e.sent);case 8:throw o;case 9:e.next=14;break;case 11:if(!o.request){e.next=14;break}throw console.error(o.message),o;case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e,this)}))),function(e,r,n,o){return t.apply(this,arguments)})}]),e}()},113:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return y}));r(193);var n,o=r(2),c=r(44),f=r(45),h=r(115),d=r(116),l=r(73),m=(r(13),r(28),r(43),r(30),r(25),r(112));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(d.a)(this,r)}}!function(e){e.DRAFT="draft",e.PUBLISHED="published"}(n||(n={}));var y=function(e){Object(h.a)(l,e);var t,r,n,d=v(l);function l(e,t){var r;return Object(c.a)(this,l),(r=d.call(this,e)).apiToken=t||"",r}return Object(f.a)(l,[{key:"translateStory",value:(n=Object(o.a)(regeneratorRuntime.mark((function e(t,r,n,o,c,f){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.SEND("/api/translate-story","POST",{params:{storyId:t,sourceLang:r,copyFrom:n,overwriteContent:o,extendContent:c,dryRun:f},headers:{"X-API-TOKEN":this.apiToken}}));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t,r,o,c,f){return n.apply(this,arguments)})},{key:"importTranslationFiles",value:(r=Object(o.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>2&&void 0!==c[2]&&c[2],o=new FormData,Array.from(r).forEach((function(e,t){o.append("file-".concat(t+1),e)})),e.abrupt("return",this.SEND("/api/import-translation-file","POST",{params:{storyId:t,forcePublish:n},headers:{"content-type":"multipart/form-data","X-API-TOKEN":this.apiToken},data:o}));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"fetchStoryById",value:(t=Object(o.a)(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.SEND("/api/preview","GET",{withCredentials:!0,params:{secret:this.apiToken,slug:"/api/storyblok/story-by-id",id:t,version:r}}));case 1:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),l}(m.a)},146:function(e,t,r){"use strict";var n=r(1),o=r(206),c=r.n(o);r(298);n.default.use(c.a)},209:function(e,t,r){r(210),e.exports=r(211)},272:function(e,t,r){"use strict";r.r(t),r.d(t,"plugins",(function(){return o}));r(54);var n=new Array;var o=n},273:function(e,t,r){"use strict";r.r(t),r.d(t,"state",(function(){return o})),r.d(t,"getters",(function(){return c})),r.d(t,"mutations",(function(){return f})),r.d(t,"actions",(function(){return h}));var n=r(2),o=(r(25),r(13),r(30),r(32),r(151),r(56),r(58),function(){return{apiToken:void 0}}),c={apiToken:function(e){return e.apiToken},spaceId:function(e){return e.spaceId}},f={setAuthorization:function(e,data){e=Object.assign(e,data)},setSpaceId:function(e,t){e.spaceId=t},setApiToken:function(e,t){var r;null!==(r=e.apiToken)&&void 0!==r||(e.apiToken=t)}},h={token:function(e,t){return Object(n.a)(regeneratorRuntime.mark((function r(){var o,c,f;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=e.dispatch,c=e.commit,f=e.state,t=new URLSearchParams(t),c("setApiToken",t.get("token")),t.set("token",f.apiToken),f.refresh_token?(t.append("grant_type","refresh_token"),t.append("refresh_token",f.refresh_token)):(t.append("grant_type","authorization_code"),c("setSpaceId",t.get("space_id"))),r.next=7,fetch("".concat("https://develop.systemair.com/api/storyblok-oauth/translate-page/token","?").concat(new URLSearchParams(t))).then((function(e){return e.json()})).then((function(data){c("setAuthorization",data),setTimeout(Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("token",{});case 2:case"end":return e.stop()}}),e)}))),1e3*(data.expires_in-30))}));case 7:case"end":return r.stop()}}),r)})))()}}},297:function(e,t,r){"use strict";r.r(t),r.d(t,"actions",(function(){return f}));var n=r(117),o=r(2),c=(r(25),r(113)),f={importTranslationFiles:function(e,t){return Object(o.a)(regeneratorRuntime.mark((function r(){var o,f,h,d,l,m,v,y;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return Object(n.a)(e),o=t.storyId,f=t.spaceId,h=t.translationFiles,d=t.forcePublish,l=void 0!==d&&d,m=sessionStorage.getItem("SA-SYSTEMAIR_".concat(f,"_API_BASE")),v=sessionStorage.getItem("SA-IMPORT_TRANSLATION_FILE_TOKEN"),y=new c.b(m,v),r.abrupt("return",y.importTranslationFiles(o,h,l));case 6:case"end":return r.stop()}}),r)})))()},fetchStoryById:function(e,t){return Object(o.a)(regeneratorRuntime.mark((function r(){var o,f,h,d,l,m;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return Object(n.a)(e),o=t.storyId,f=t.spaceId,h=t.version,d=sessionStorage.getItem("SA-SYSTEMAIR_".concat(f,"_API_BASE")),l=sessionStorage.getItem("SA-PREVIEW_TOKEN"),m=new c.b(d,l),r.abrupt("return",m.fetchStoryById(o,h));case 6:case"end":return r.stop()}}),r)})))()},translateStory:function(e,t){return Object(o.a)(regeneratorRuntime.mark((function r(){var o,f,h,d,l,m,v,y,O,R;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return Object(n.a)(e),o=t.storyId,f=t.sourceLanguage,h=t.spaceId,d=t.extendContent,l=t.overwriteContent,m=t.copyFrom,v=t.dryRun,y=sessionStorage.getItem("SA-SYSTEMAIR_".concat(h,"_API_BASE")),O=sessionStorage.getItem("SA-TRANSLATE_STORY_TOKEN"),R=new c.b(y,O),r.abrupt("return",R.translateStory(o,f,m,l,d,v));case 6:case"end":return r.stop()}}),r)})))()}}},300:function(e,t,r){"use strict";r.r(t),r.d(t,"deeplState",(function(){return v})),r.d(t,"getters",(function(){return y})),r.d(t,"mutations",(function(){return O})),r.d(t,"actions",(function(){return R}));var n=r(2),o=(r(25),r(13),r(193),r(44)),c=r(45),f=r(115),h=r(116),d=r(73);function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(h.a)(this,r)}}var m=function(e){Object(f.a)(d,e);var t,r,h=l(d);function d(e,t){var r;return Object(o.a)(this,d),(r=h.call(this,"".concat(e,"/api/translate/deepl"))).authToken=t,r}return Object(c.a)(d,[{key:"supportedLanguages",value:(r=Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.GET("/languages",void 0,{"X-API-TOKEN":this.authToken}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"translate",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.GET("/translate",void 0,{"X-API-TOKEN":this.authToken}));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),d}(r(112).a),v=function(){return{supportedLanguages:[]}},y={supportedLanguages:function(e){return e.supportedLanguages}},O={setSupportedLanguages:function(e,t){e.supportedLanguages=t}},R={retrieveSupportedLanguages:function(e,t){return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o,c,f;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e.state,o=e.commit,c=new m(sessionStorage.getItem("SA-SYSTEMAIR_".concat(t,"_API_BASE")),sessionStorage.getItem("SA-DEEPL_TOKEN")),void 0===n.supportedLanguages){r.next=4;break}return r.abrupt("return",n.supportedLanguages);case 4:return r.next=6,c.supportedLanguages();case 6:return f=r.sent,o("setSupportedLanguages",f),r.abrupt("return",f);case 9:case"end":return r.stop()}}),r)})))()}}}},[[209,5,1,6]]]);